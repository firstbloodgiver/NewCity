#pragma checksum "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "ed0363a9d31a931631e8e04848f61cc44c26cce6"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_CreateStory_Index), @"mvc.1.0.view", @"/Views/CreateStory/Index.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/CreateStory/Index.cshtml", typeof(AspNetCore.Views_CreateStory_Index))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\_ViewImports.cshtml"
using NewCity;

#line default
#line hidden
#line 2 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\_ViewImports.cshtml"
using NewCity.Models;

#line default
#line hidden
#line 2 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
using NewCity.Enum;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"ed0363a9d31a931631e8e04848f61cc44c26cce6", @"/Views/CreateStory/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"428dca41bb5514e614701b69b27a8dec3a48fd5f", @"/Views/_ViewImports.cshtml")]
    public class Views_CreateStory_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<IEnumerable<NewCity.Models.StoryCard>>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/js/enum.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("src", new global::Microsoft.AspNetCore.Html.HtmlString("~/lib/jquery/dist/jquery.min.js"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("target", new global::Microsoft.AspNetCore.Html.HtmlString("fack"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("StoryCard"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_4 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "Save", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_5 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("method", "post", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_6 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("ConditionForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_7 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("id", new global::Microsoft.AspNetCore.Html.HtmlString("EffectForm"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 3 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
  
    ViewData["Title"] = "Creator";

#line default
#line hidden
            BeginContext(111, 36, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "d40a3c2a889c452799b06ca4d8f40d15", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(147, 2, true);
            WriteLiteral("\r\n");
            EndContext();
            BeginContext(149, 55, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("script", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "fe70c2a68f6549d3a67d769d8efda68a", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.Razor.TagHelpers.UrlResolutionTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_Razor_TagHelpers_UrlResolutionTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(204, 184, true);
            WriteLiteral("\r\n<!--故事卡包装为树。新建下一故事卡要在故事卡里面建-->\r\n<div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n        <div class=\"col-md-3\">\r\n\r\n\r\n        </div>\r\n        <div class=\"col-md-9\">\r\n            ");
            EndContext();
            BeginContext(388, 3376, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "bab11a7a88074ef6a2ced38682bc2b87", async() => {
                BeginContext(455, 134, true);
                WriteLiteral("\r\n                <div class=\"row\">\r\n                    <div id=\"StoryId\">\r\n                        <input name=\"storyCard.ID\" hidden");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 589, "\"", 649, 1);
#line 19 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 597, Model.Count() > 0 ? Model.First().ID : Guid.Empty, 597, 52, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(650, 29, true);
                WriteLiteral(" />\r\n                        ");
                EndContext();
                BeginContext(681, 49, false);
#line 20 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                    Write(Model.Count() > 0 ? Model.First().ID : Guid.Empty);

#line default
#line hidden
                EndContext();
                BeginContext(731, 96, true);
                WriteLiteral("\r\n                    </div>\r\n                    <div id=\"StoryName\">\r\n                        ");
                EndContext();
                BeginContext(829, 48, false);
#line 23 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                    Write(Model.Count() > 0 ? Model.First().StoryName : "");

#line default
#line hidden
                EndContext();
                BeginContext(878, 202, true);
                WriteLiteral("\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\">\r\n                    <div class=\"col-md-4\" id=\"Img\">\r\n                        <!--img-->\r\n                        ");
                EndContext();
                BeginContext(1082, 42, false);
#line 29 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                    Write(Model.Count() > 0 ? Model.First().IMG : "");

#line default
#line hidden
                EndContext();
                BeginContext(1125, 211, true);
                WriteLiteral("\r\n                    </div>\r\n                    <div class=\"col-md-8\" id=\"Content\">\r\n                        <!--text-->\r\n                        <textarea name=\"storyCard.Text\" class=\"form-control\" rows=\"10\">");
                EndContext();
                BeginContext(1338, 43, false);
#line 33 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                                                                                   Write(Model.Count() > 0 ? Model.First().Text : "");

#line default
#line hidden
                EndContext();
                BeginContext(1382, 112, true);
                WriteLiteral("</textarea>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row\" id=\"Option\">\r\n");
                EndContext();
#line 37 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                     if (Model.Count() != 0)
                    {

#line default
#line hidden
                BeginContext(1563, 66, true);
                WriteLiteral("                        <input hidden id=\"optionCount\" type=\"text\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 1629, "\"", 1709, 1);
#line 39 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 1637, Model.First().StoryOptions!=null?Model.First().StoryOptions.Count():0, 1637, 72, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(1710, 5, true);
                WriteLiteral(" />\r\n");
                EndContext();
#line 40 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                        int i = 0; //计算当前是第几个选项
                        

#line default
#line hidden
#line 41 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                         if (Model.First().StoryOptions != null)
                        {
                            

#line default
#line hidden
#line 43 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                             foreach (var item in Model.First().StoryOptions)
                            {

#line default
#line hidden
                BeginContext(1967, 48, true);
                WriteLiteral("                                <div class=\"row\"");
                EndContext();
                BeginWriteAttribute("id", " id=\"", 2015, "\"", 2035, 2);
                WriteAttributeValue("", 2020, "option-", 2020, 7, true);
#line 45 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2027, item.ID, 2027, 8, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(2036, 45, true);
                WriteLiteral(">\r\n                                    <input");
                EndContext();
                BeginWriteAttribute("name", " name=\"", 2081, "\"", 2117, 3);
                WriteAttributeValue("", 2088, "storyCard.StoryOptions[", 2088, 23, true);
#line 46 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2111, i, 2111, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2113, "].ID", 2113, 4, true);
                EndWriteAttribute();
                BeginContext(2118, 19, true);
                WriteLiteral(" hidden type=\"text\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 2137, "\"", 2153, 1);
#line 46 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2145, item.ID, 2145, 8, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(2154, 64, true);
                WriteLiteral(" />\r\n\r\n                                    <button type=\"button\"");
                EndContext();
                BeginWriteAttribute("onclick", " onclick=\"", 2218, "\"", 2243, 3);
                WriteAttributeValue("", 2228, "Condition(\'", 2228, 11, true);
#line 48 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2239, i, 2239, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2241, "\')", 2241, 2, true);
                EndWriteAttribute();
                BeginContext(2244, 56, true);
                WriteLiteral(">条件</button>\r\n                                    <input");
                EndContext();
                BeginWriteAttribute("id", " id=\"", 2300, "\"", 2341, 3);
                WriteAttributeValue("", 2305, "storyCard.StoryOptions[", 2305, 23, true);
#line 49 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2328, i, 2328, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2330, "].Condition", 2330, 11, true);
                EndWriteAttribute();
                BeginWriteAttribute("name", " name=\"", 2342, "\"", 2385, 3);
                WriteAttributeValue("", 2349, "storyCard.StoryOptions[", 2349, 23, true);
#line 49 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2372, i, 2372, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2374, "].Condition", 2374, 11, true);
                EndWriteAttribute();
                BeginContext(2386, 19, true);
                WriteLiteral(" hidden type=\"text\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 2405, "\"", 2430, 1);
#line 49 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2413, item.Condition, 2413, 17, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(2431, 49, true);
                WriteLiteral(" />\r\n\r\n                                    <input");
                EndContext();
                BeginWriteAttribute("name", " name=\"", 2480, "\"", 2518, 3);
                WriteAttributeValue("", 2487, "storyCard.StoryOptions[", 2487, 23, true);
#line 51 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2510, i, 2510, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2512, "].Text", 2512, 6, true);
                EndWriteAttribute();
                BeginContext(2519, 12, true);
                WriteLiteral(" type=\"text\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 2531, "\"", 2549, 1);
#line 51 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2539, item.Text, 2539, 10, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(2550, 62, true);
                WriteLiteral(">\r\n\r\n                                    <button type=\"button\"");
                EndContext();
                BeginWriteAttribute("onclick", " onclick=\"", 2612, "\"", 2634, 3);
                WriteAttributeValue("", 2622, "Effect(\'", 2622, 8, true);
#line 53 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2630, i, 2630, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2632, "\')", 2632, 2, true);
                EndWriteAttribute();
                BeginContext(2635, 56, true);
                WriteLiteral(">效果</button>\r\n                                    <input");
                EndContext();
                BeginWriteAttribute("id", " id=\"", 2691, "\"", 2729, 3);
                WriteAttributeValue("", 2696, "storyCard.StoryOptions[", 2696, 23, true);
#line 54 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2719, i, 2719, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2721, "].Effect", 2721, 8, true);
                EndWriteAttribute();
                BeginWriteAttribute("name", " name=\"", 2730, "\"", 2770, 3);
                WriteAttributeValue("", 2737, "storyCard.StoryOptions[", 2737, 23, true);
#line 54 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2760, i, 2760, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 2762, "].Effect", 2762, 8, true);
                EndWriteAttribute();
                BeginContext(2771, 19, true);
                WriteLiteral(" hidden type=\"text\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 2790, "\"", 2812, 1);
#line 54 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2798, item.Effect, 2798, 14, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(2813, 64, true);
                WriteLiteral(" />\r\n\r\n                                    <button type=\"button\"");
                EndContext();
                BeginWriteAttribute("onclick", " onclick=\"", 2877, "\"", 2912, 3);
                WriteAttributeValue("", 2887, "Cancel(\'option-", 2887, 15, true);
#line 56 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 2902, item.ID, 2902, 8, false);

#line default
#line hidden
                WriteAttributeValue("", 2910, "\')", 2910, 2, true);
                EndWriteAttribute();
                BeginContext(2913, 73, true);
                WriteLiteral(">取消</button>\r\n\r\n                                    <button type=\"button\"");
                EndContext();
                BeginWriteAttribute("onclick", " onclick=\"", 2986, "\"", 3052, 7);
                WriteAttributeValue("", 2996, "NextCard(\'", 2996, 10, true);
#line 58 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 3006, i, 3006, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 3008, "\',\'", 3008, 3, true);
#line 58 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 3011, Model.First().StorySeriesID, 3011, 28, false);

#line default
#line hidden
                WriteAttributeValue("", 3039, "\',\'", 3039, 3, true);
#line 58 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 3042, item.ID, 3042, 8, false);

#line default
#line hidden
                WriteAttributeValue("", 3050, "\')", 3050, 2, true);
                EndWriteAttribute();
                BeginContext(3053, 55, true);
                WriteLiteral(">→</button>\r\n                                    <input");
                EndContext();
                BeginWriteAttribute("name", " name=\"", 3108, "\"", 3157, 3);
                WriteAttributeValue("", 3115, "storyCard.StoryOptions[", 3115, 23, true);
#line 59 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 3138, i, 3138, 2, false);

#line default
#line hidden
                WriteAttributeValue("", 3140, "].NextStoryCardID", 3140, 17, true);
                EndWriteAttribute();
                BeginContext(3158, 35, true);
                WriteLiteral(" type=\"text\" placeholder=\"为空则新建故事卡\"");
                EndContext();
                BeginWriteAttribute("value", " value=\"", 3193, "\"", 3262, 1);
#line 59 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
WriteAttributeValue("", 3201, item.NextStoryCardID==null?Guid.Empty:item.NextStoryCardID, 3201, 61, false);

#line default
#line hidden
                EndWriteAttribute();
                BeginContext(3263, 43, true);
                WriteLiteral(">\r\n                                </div>\r\n");
                EndContext();
#line 61 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                                i++;
                            }

#line default
#line hidden
#line 62 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                             
                        }

#line default
#line hidden
#line 63 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                         

                    }

#line default
#line hidden
                BeginContext(3427, 330, true);
                WriteLiteral(@"

                </div>
                <div class=""form-group"">
                    <button type=""button"" onclick=""AddOption()"">增加选项</button>
                </div>
                <div class=""form-group"">
                    <button type=""submit"" id=""submit"" class=""btn"">保存</button>
                </div>
            ");
                EndContext();
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Action = (string)__tagHelperAttribute_4.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_4);
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper.Method = (string)__tagHelperAttribute_5.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_5);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(3764, 534, true);
            WriteLiteral(@"
            <iframe name=""fack"" id=""fack"" hidden></iframe>
        </div>
    </div>
</div>



<!--条件模态框-->
<div id=""ConditionModel"" class=""modal fade"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true"">&times;</button>
                <h4 class=""modal-title"" id=""myModalLabel"">模态框（Modal）标题</h4>
            </div>
            <div class=""modal-body"">
                ");
            EndContext();
            BeginContext(4298, 32, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "8279cfcaaf8b4ae88adebd19f376b02a", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_6);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(4330, 611, true);
            WriteLiteral(@"
                <button onclick=""AddCondition()"">+</button>
                <button onclick=""SaveCondition()"">确定</button>
            </div>
        </div>
    </div>
</div>

<!--效果模态框-->
<div id=""EffectModel"" class=""modal fade"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true"">&times;</button>
                <h4 class=""modal-title"" id=""myModalLabel"">模态框（Modal）标题</h4>
            </div>
            <div class=""modal-body"">
                ");
            EndContext();
            BeginContext(4941, 29, false);
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "f6756014aaa34d0bafcb02c97bfb6832", async() => {
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_7);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            EndContext();
            BeginContext(4970, 2522, true);
            WriteLiteral(@"
                <button onclick=""AddEffect()"">+</button>
                <button onclick=""SaveEffect()"">确定</button>
            </div>
        </div>
    </div>
</div>

<!--下一张卡片模态框-->
<div id=""NextCardModel"" class=""modal fade"">
    <div class=""modal-dialog"">
        <div class=""modal-content"">
            <div class=""modal-header"">
                <button type=""button"" class=""close"" data-dismiss=""modal"" aria-hidden=""true"">&times;</button>
                <h4 class=""modal-title"" id=""myModalLabel"">模态框（Modal）标题</h4>
            </div>
            <div class=""modal-body"">
                
            </div>
        </div>
    </div>
</div>

<script>

    function GetStoryCard() {
        //点击树加载该故事卡到主页面

    }

    $(""#fack"").on('load', function () {
        let a = window.frames[""fack""].document.body.innerText;
        if (a != '') {
            alert(a);
            window.location.reload();
        }
    });

    //取消选项
    function Cancel(optionid) {
        $(""#"" + o");
            WriteLiteral(@"ptionid).remove();
    }

    //下一张卡
    function NextCard(id, seriesid, optionid) {
        let nextid = document.getElementById(""storyCard.StoryOptions[""+id+""].NextStoryCardID"").value;

        if (confirm(""即将移动到新的页面，请确认已保存"")) {
            $.post(""/CreateStory/NextCard"", { nextid: nextid, seriesid: seriesid, optionid: optionid}, function (data) {

            });
        }
    }

    //增加选项
    function AddOption() {
        let optioncount = $(""#optionCount"").val();  //选项计数
        if (!optioncount) {
            optioncount = 0;
        }
        let id = guid();
        let optionID = ""<input hidden type='text' name='storyCard.StoryOptions["" + optioncount + ""].ID' value='"" + id + ""' />"";
        let condition = ""<button type='button' onclick='Condition("" + optioncount + "")'>条件</button> <input hidden id='storyCard.StoryOptions["" + optioncount + ""].Condition' name='storyCard.StoryOptions["" + optioncount + ""].Condition' type='text' value='' />"";
        let text = ""<input type='text'");
            WriteLiteral(@" name='storyCard.StoryOptions["" + optioncount + ""].Text' value=''>"";
        let effect = "" <button type='button' onclick='Effect("" + optioncount + "")'>效果</button> <input id='storyCard.StoryOptions["" + optioncount + ""].Effect' name='storyCard.StoryOptions["" + optioncount + ""].Effect' hidden type='text' value='' />"";
        let cancel = "" <button type='button' onclick=Cancel('option-"" + id + ""')>取消</button> <button type='button' onclick='NextCard('"" + optioncount+""','");
            EndContext();
            BeginContext(7493, 27, false);
#line 174 "E:\Document\VisualStudioProject\NewCity\NewCity\Views\CreateStory\Index.cshtml"
                                                                                                                                                     Write(Model.First().StorySeriesID);

#line default
#line hidden
            EndContext();
            BeginContext(7520, 8463, true);
            WriteLiteral(@"','"" + id+""')'>→</button>"";
        let nextcard = ""<input name='storyCard.StoryOptions["" + optioncount + ""].NextStoryCardID' type='text' >"";
        let toappend = ""<div class='row' id=option-"" + id + "">"" + optionID + condition + text + effect + cancel + nextcard + ""</div>""
        $(""#Option"").append(toappend)
        $(""#optionCount"").val(optioncount);
        optioncount++;
    }

    //设置条件
    var conditioncount = 0; //当前页面有多少个条件
    function Condition(number) {
        //清空条件模态框
        var ConditionForm = document.getElementById(""ConditionForm"");
        ConditionForm.innerHTML = """";
        conditioncount = 0;
        let q = ""<input hidden type='text' id='ConditionId' value='"" + number + ""'/>"";
        $(""#ConditionForm"").append(q);
        let Cd = document.getElementById(""storyCard.StoryOptions["" + number + ""].Condition"").value;
        if (Cd) {
            let condition = JSON.parse(Cd);
            let conditionLength = 0; //条件长度
            for (let obj in condition) {
  ");
            WriteLiteral(@"              conditionLength++;
            }

            for (let i = 0; i < conditionLength / 3; i++) {
                let Name = ""<input  type='text' name='storyStates["" + i + ""].Name' id='cd-storyStates["" + i + ""].Name'/>"";
                let Type = ""<select  name='storyStates["" + i + ""].Type' id='cd-storyStates["" + i + ""].Type'>""
                    + ""<option value='1'>></option>""
                    + ""<option value='2'><</option>""
                    + ""<option value='3'>=</option>""
                    + ""<option value='4'>≠</option>""
                    + ""</select>"";
                let Value = ""<input  type='text' name='storyStates["" + i + ""].Value' id='cd-storyStates["" + i + ""].Value'/>"";
                let Delete = ""<button onclick='ConditionCancel("" + i + "")'>取消</button>"";
                let context = Name + Type + Value + Delete;
                let toappend = ""<div class='row' id='condition"" + i + ""'>"" + context + ""</div>""
                $(""#ConditionForm"").append(toappen");
            WriteLiteral(@"d)
                conditioncount++;
                //赋值

                document.getElementById(""cd-storyStates["" + i + ""].Name"").value = condition[""storyStates["" + i + ""].Name""];
                document.getElementById(""cd-storyStates["" + i + ""].Type"").text = enumConditionType[condition[""storyStates["" + i + ""].Type""]];
                document.getElementById(""cd-storyStates["" + i + ""].Type"").value = condition[""storyStates["" + i + ""].Type""];
                document.getElementById(""cd-storyStates["" + i + ""].Value"").value = condition[""storyStates["" + i + ""].Value""];

            }
        }

        $('#ConditionModel').modal('show');

    }

    //取消条件
    function ConditionCancel(conditionID) {
        $(""#condition"" + conditionID + """").remove();
        conditioncount--;
    }

    function SaveCondition() {
        let i = $(""#ConditionId"").val();
        //let value = $(""#ConditionForm"").serialize();
        let value = FormtoJson($(""#ConditionForm""));

        document.getEl");
            WriteLiteral(@"ementById(""storyCard.StoryOptions["" + i + ""].Condition"").value = value;
        $(""#ConditionModel"").modal('hide')
    }

    //增加条件
    function AddCondition() {
        let i = conditioncount;
        let Name = ""<input  type='text'  name='storyStates["" + i + ""].Name' id='cd-storyStates["" + i + ""].Name'/>"";
        let Type = ""<select  name='storyStates["" + i + ""].Type' id='cd-storyStates["" + i + ""].Type'>""
            + ""<option value='1'>></option>""
            + ""<option value='2'><</option>""
            + ""<option value='3'>=</option>""
            + ""<option value='4'>≠</option>""
            + ""</select>"";
        let Value = ""<input  type='text' name='storyStates["" + i + ""].Value' id='cd-storyStates["" + i + ""].Value'/>"";
        let Delete = ""<button onclick='ConditionCancel("" + i + "")'>取消</button>"";
        let context = Name + Type + Value + Delete;
        let toappend = ""<div class='row' id='condition"" + i + ""'>"" + context + ""</div>""
        $(""#ConditionForm"").append(toappend)
 ");
            WriteLiteral(@"       conditioncount++;
    }

    //设置效果
    var effectcount = 0; //当前页面有多少个条件
    function Effect(number) {
        var EffectForm = document.getElementById(""EffectForm"");
        EffectForm.innerHTML = """";
        effectcount = 0;
        let q = ""<input hidden type='text' id='EffectId' value='"" + number + ""'/>"";
        $(""#EffectForm"").append(q);
        //let effect = JSON.parse($(""#storyCard.StoryOptions["" + number + ""].Effect"").val());
        let ef = document.getElementById(""storyCard.StoryOptions["" + number + ""].Effect"").value;
        if (ef) {
            let effect = JSON.parse(ef);
            let effectlength = 0;
            for (let obj in effect) {
                effectlength++;
            }
            for (let i = 0; i < effectlength / 3; i++) {
                let Name = ""<input  type='text' name='storyStates["" + i + ""].Name' id='ef-storyStates["" + i + ""].Name'/>"";
                let Type = ""<select  name='storyStates["" + i + ""].Type' id='ef-storyStates["" + i + """);
            WriteLiteral(@"].Type'>""
                    + ""<option value='0'>增加</option>""
                    + ""<option value='1'>减少</option>""
                    + ""<option value='2'>赋值</option>""
                    + ""</select>"";
                let Value = ""<input  type='text' name='storyStates["" + i + ""].Value' id='ef-storyStates["" + i + ""].Value'/>"";
                let Delete = ""<button onclick='EffectCancel("" + i + "")'>取消</button>"";
                let context = Name + Type + Value + Delete;
                let toappend = ""<div class='row' id='effect"" + i + ""'>"" + context + ""</div>""
                $(""#EffectForm"").append(toappend)
                effectcount++;
                //赋值
                document.getElementById(""ef-storyStates["" + i + ""].Name"").value = effect[""storyStates["" + i + ""].Name""];
                document.getElementById(""ef-storyStates["" + i + ""].Type"").text = enumEffectType[effect[""storyStates["" + i + ""].Type""]];
                document.getElementById(""ef-storyStates["" + i + ""].Type"").value");
            WriteLiteral(@" = effect[""storyStates["" + i + ""].Type""];
                document.getElementById(""ef-storyStates["" + i + ""].Value"").value = effect[""storyStates["" + i + ""].Value""];

            }
        }

        $('#EffectModel').modal('show');
    }

    function EffectCancel(num) {
        $(""#effect"" + num + """").remove();
        effectcount--;
    }
    //增加效果
    function AddEffect() {
        let i = effectcount;
        let Name = ""<input  type='text'  name='storyStates["" + i + ""].Name' id='ef-storyStates["" + i + ""].Name'/>"";
        let Type = ""<select  name='storyStates["" + i + ""].Type' id='ef-storyStates["" + i + ""].Type'>""
            + ""<option value='0'>增加</option>""
            + ""<option value='1'>减少</option>""
            + ""<option value='2'>赋值</option>""
            + ""</select>"";
        let Value = ""<input  type='text' name='storyStates["" + i + ""].Value' id='ef-storyStates["" + i + ""].Value'/>"";
        let Delete = ""<button onclick='EffectCancel("" + i + "")'>取消</button>"";
        let");
            WriteLiteral(@" context = Name + Type + Value + Delete;
        let toappend = ""<div class='row' id='effect"" + i + ""'>"" + context + ""</div>""
        $(""#EffectForm"").append(toappend)
        effectcount++;
    }
    //保存效果
    function SaveEffect() {
        let i = $(""#EffectId"").val();
        //let value = $(""#ConditionForm"").serialize();
        let value = FormtoJson($(""#EffectForm""));

        document.getElementById(""storyCard.StoryOptions["" + i + ""].Effect"").value = value;
        $(""#EffectModel"").modal('hide')
    }

    //生成uuid
    function S4() {
        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
    }
    function guid() {
        return (S4() + S4() + ""-"" + S4() + ""-"" + S4() + ""-"" + S4() + ""-"" + S4() + S4() + S4());
    }

    function FormtoJson(form) {
        var o = {};
        var a = form.serializeArray();
        for (let obj in a) {
            if (o[a[obj].name]) {
                if (!o[a[obj].name].push) {
                    o[a[obj].name] ");
            WriteLiteral(@"= [o[a[obj].name]]
                }
                o[a[obj].name].push(a[obj].value) || """";
            }
            else {
                o[a[obj].name] = a[obj].value || '';
            }
        }

        return JSON.stringify(o);
    }

</script>

");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<IEnumerable<NewCity.Models.StoryCard>> Html { get; private set; }
    }
}
#pragma warning restore 1591
